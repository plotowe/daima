<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ä¸€ä»½ç¥ç§˜ç¤¼ç‰©</title>
<style>
body {
  margin: 0;
  background: #fffdf9;
  font-family: "Microsoft YaHei","PingFang SC",sans-serif;
  overflow: hidden;
}

/* æ¯ä¸ªä¾¿ç­¾ */
.note {
  position: absolute;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 14px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  transition: transform .2s;
  word-break: break-all;
  cursor: pointer;
  user-select: none;
  z-index: 10;
}
.note:hover { transform: scale(1.05); }

/* å¼¹çª—æ ·å¼ */
.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff8f0;
  padding: 25px 50px;
  border-radius: 12px;
  box-shadow: 0 0 30px rgba(255,182,193,0.6);
  font-size: 22px;
  text-align: center;
  animation: fadeIn .4s ease;
  z-index: 999999999; /* æ°¸è¿œç½®é¡¶ */
}
@keyframes fadeIn {
  from {opacity: 0; transform: translate(-50%, -55%) scale(0.95);}
  to {opacity: 1; transform: translate(-50%, -50%) scale(1);}
}
.final {
  font-size: 28px;
  background: linear-gradient(120deg, #ffe6e6, #fff0b3);
  box-shadow: 0 0 40px rgba(255, 105, 180, 0.6);
  color: #ff4f70;
  text-shadow: 0 0 10px rgba(255, 99, 132, 0.6);
}

/* éŸ³ä¹æŒ‰é’® */
#musicBtn {
  position: fixed;
  right: 15px;
  bottom: 15px;
  background: rgba(255,255,255,0.9);
  border-radius: 50%;
  padding: 10px 12px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  font-size: 18px;
  transition: all .2s;
  user-select: none;
  z-index: 1000000000;
}
#musicBtn:hover {
  background: #fff0f5;
  transform: scale(1.1);
}
</style>
</head>
<body>

<!-- èƒŒæ™¯éŸ³ä¹ -->
<audio id="bgm" preload="auto" loop>
  <source src="https://cdn.pixabay.com/download/audio/2023/03/07/audio_b62e2f5639.mp3?filename=sweet-love-14308.mp3" type="audio/mpeg">
</audio>
<div id="musicBtn" title="ç‚¹å‡»æ’­æ”¾éŸ³ä¹ ğŸµ">ğŸµ</div>

<script>
const msgs = [
"æ„¿ä½ æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±","ä½ è¶…å‰å®³çš„ï¼Œæˆ‘ç›¸ä¿¡ä½ ","æ„¿ä½ ç¡ä¸ªå¥½è§‰",
"æ¯å¤©æœ‰å°æƒŠå–œ","åƒé¥­æœ‰å¹¸ç¦","æ—©å®‰ ä¸ç†¬å¤œ","åˆ«ç»™è‡ªå·±å¤ªå¤§å‹åŠ›",
"ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å“¦ï¼","å¤šå–ç‚¹æ°´ï¼Œå¤šåƒæ°´æœ","ä¿æŒå¾®ç¬‘å‘¦","ä¸å¼€å¿ƒå°±è·Ÿæˆ‘è¯´",
"æ¢¦æƒ³æˆçœŸ","å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœ","æ—©ç‚¹ä¼‘æ¯ï¼Œæ‰‹æœºåŠæ—¶å……ç”µ","ä»˜å‡ºæœ‰å¥½ç»“æœ",
"æœ‰é—®é¢˜æ…¢æ…¢è§£å†³","åšä»¶å–œæ¬¢çš„å°äº‹","å¹³å‡¡ä¹Ÿè‡ªåœ¨","é¡ºé¡ºåˆ©åˆ©",
"å¤‡ç‚¹é›¶é£Ÿé¥¿äº†å«å«è‚šå­","åŠ æ²¹ï¼Œä½ ä¸€å®šèƒ½åšå¥½","åˆ«ç†¬å¤œ","å¤šåƒæ°´æœæ—é›¨",
"æ¯å¤©å¼€å¿ƒç‚¹","åˆ«çº ç»“è¿‡å»","æ…¢æ…¢ä¼šå¥½èµ·æ¥","é‡è§å¥½å¤©æ°”","ä¿æŒå¥½å¿ƒæƒ…",
"å¤šè¡¥æ°´","æ”¾æ¾ä¸€ä¸‹","åƒç‚¹å¥½åƒçš„","å‘å‰çœ‹","å‹‡æ•¢ä¸€ç‚¹","ä¿æŒç¬‘å®¹",
"åˆ«å¿˜äº†ä¼‘æ¯","ä»Šå¤©ä¹Ÿè¦åŠ æ²¹","æ—©ç‚¹ä¼‘æ¯","ç¥ä½ å¥½è¿","æ„¿ä½ ç¬‘å®¹å¸¸åœ¨",
"ä¸é¡ºæ‰¾æˆ‘","emoäº†ï¼Œç¡ä¸€è§‰","é¡ºåˆ©é¡ºåˆ©","æ¢¦æƒ³æˆçœŸ","ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜›",
"å¤‡ç‚¹é›¶é£Ÿ","åˆ«ç€æ€¥","ç›¸ä¿¡è‡ªå·±","ä½ è¶…æ£’","åˆ«å¿˜å–æ°´","æ—©ç‚¹åƒé¥­",
"å¤šç©¿è¡£æœ","å¹³å®‰å–œä¹","é‡äº‹åˆ«æ€¥","æ…¢æ…¢æ¥","å¿ƒæ€å¹³å’Œ"
];

const colors = ["#fff8f0","#fff7fb","#f8fff6","#fffdf0","#fff8f2"];
const body = document.body;
const num = 120; // âœ… æ”¹ä¸º 120 æ¡ä¾¿ç­¾
let clickCount = 0;

// åˆ›å»ºéšæœºä¾¿ç­¾
for(let i=0; i<num; i++){
  const div = document.createElement("div");
  div.className = "note";
  div.textContent = msgs[Math.floor(Math.random()*msgs.length)];
  div.style.background = colors[Math.floor(Math.random()*colors.length)];

  // éšæœºä½ç½®ä¸æ—‹è½¬è§’åº¦
  div.style.left = Math.random()*90 + "%";
  div.style.top = Math.random()*90 + "%";
  div.style.transform = `rotate(${(Math.random()*20-10).toFixed(1)}deg)`;
  body.appendChild(div);

  // ç‚¹å‡»ä¾¿ç­¾äº‹ä»¶
  div.addEventListener("click", () => {
    showPopup(div.textContent);
    clickCount++;
    if(clickCount >= 5){
      removeAllNotes();
      showPopup("ä½ ä¸€å®šå¯ä»¥çš„ â¤ï¸", true);
    }
  });
}

// æ˜¾ç¤ºå¼¹çª—ï¼ˆç½®é¡¶ï¼‰
function showPopup(text, final=false){
  // ç§»é™¤æ—§å¼¹çª—
  document.querySelectorAll(".popup:not(.final)").forEach(p => p.remove());

  const popup = document.createElement("div");
  popup.className = "popup" + (final ? " final" : "");
  popup.textContent = text;
  popup.style.zIndex = final ? "1000000000" : "999999999";
  body.appendChild(popup);

  if(!final){
    setTimeout(()=>popup.remove(), 1000);
  }
}

// æ¸…é™¤æ‰€æœ‰ä¾¿ç­¾
function removeAllNotes(){
  document.querySelectorAll(".note").forEach(n => n.remove());
}

// ğŸµ éŸ³ä¹æ§åˆ¶
const bgm = document.getElementById("bgm");
const btn = document.getElementById("musicBtn");
let playing = false;

btn.onclick = () => {
  if(!playing){
    bgm.play().then(()=>{
      playing = true;
      btn.textContent = "â¸ï¸";
      btn.title = "ç‚¹å‡»æš‚åœéŸ³ä¹";
    }).catch(()=>{
      alert("è¯·ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®ä»¥å¯ç”¨éŸ³ä¹æ’­æ”¾");
    });
  }else{
    bgm.pause();
    playing = false;
    btn.textContent = "ğŸµ";
    btn.title = "ç‚¹å‡»æ’­æ”¾éŸ³ä¹";
  }
};

// é¦–æ¬¡ç‚¹å‡»ä»»æ„ä½ç½®å°è¯•è‡ªåŠ¨æ’­æ”¾éŸ³ä¹ï¼ˆEdgeå…¼å®¹ï¼‰
document.body.addEventListener("click", () => {
  if(!playing){
    bgm.play().then(()=>{
      playing = true;
      btn.textContent = "â¸ï¸";
    }).catch(()=>{});
  }
}, {once: true});
</script>

</body>
</html>
