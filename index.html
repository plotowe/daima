<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ç§‹å¶ä¾¿ç­¾</title>
<style>
body {
  margin: 0;
  background: #fff8f0;
  font-family: "Microsoft YaHei","PingFang SC",sans-serif;
  overflow: hidden;
  position: relative;
  height: 100vh;
}

.note {
  position: absolute;
  padding: 8px 18px;
  border-radius: 8px;
  font-size: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform .25s;
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  z-index: 10;
}
.note:hover {
  transform: scale(1.05);
}

.popup {
  position: fixed;
  top: 50%;
  left: 30%;
  transform: translate(-50%, -50%) scale(0.95);
  background: linear-gradient(135deg, #FFD580, #FFB347);
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.2);
  padding: 25px 50px;
  font-size: 22px;
  text-align: center;
  opacity: 0;
  z-index: 999999;
  transition: all 0.3s ease;
}
.popup.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}
.final {
  font-size: 26px;
  color: #FF4500;
  background: linear-gradient(135deg,#FFD580,#FF8C00);
  box-shadow: 0 0 35px rgba(255,105,180,0.5);
}

.title {
  position: fixed;
  top: 10px;
  width: 100%;
  text-align: center;
  font-weight: bold;
  font-size: 18px;
  color: #444;
  z-index: 1000;
}

/* ç§‹å¶æ ·å¼ */
.leaf {
  position: fixed;
  width: 25px;
  height: 25px;
  pointer-events: none;
  z-index: 99999;
  background: url('https://cdn-icons-png.flaticon.com/512/616/616408.png') no-repeat center/contain;
  will-change: transform;
}
</style>
</head>
<body>
<div class="title">ä¸€ä»½ç¥ç§˜ç¤¼ç‰© ğŸ</div>

<script>
const msgs = [
"æ„¿ä½ æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±","ä½ è¶…å‰å®³çš„ï¼Œæˆ‘ç›¸ä¿¡ä½ ","æ„¿ä½ ç¡ä¸ªå¥½è§‰","æ¯å¤©æœ‰å°æƒŠå–œ",
"åƒé¥­æœ‰å¹¸ç¦","æ—©å®‰ ä¸ç†¬å¤œ","åˆ«ç»™è‡ªå·±å¤ªå¤§å‹åŠ›","ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å“¦ï¼",
"å¤šå–ç‚¹æ°´ï¼Œå¤šåƒæ°´æœ","ä¿æŒå¾®ç¬‘å‘¦","ä¸å¼€å¿ƒå°±è·Ÿæˆ‘è¯´","æ¢¦æƒ³æˆçœŸ","å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœ",
"æ—©ç‚¹ä¼‘æ¯ï¼Œæ‰‹æœºåŠæ—¶å……ç”µ","ä»˜å‡ºæœ‰å¥½ç»“æœ","æœ‰é—®é¢˜æ…¢æ…¢è§£å†³","åšä»¶å–œæ¬¢çš„å°äº‹",
"å¹³å‡¡ä¹Ÿè‡ªåœ¨","é¡ºé¡ºåˆ©åˆ©","å¤‡ç‚¹é›¶é£Ÿé¥¿äº†å«å«è‚šå­","åŠ æ²¹ï¼Œä½ ä¸€å®šèƒ½åšå¥½",
"åˆ«ç†¬å¤œ","æ¯å¤©å¼€å¿ƒç‚¹","åˆ«çº ç»“è¿‡å»","æ…¢æ…¢ä¼šå¥½èµ·æ¥","é‡è§å¥½å¤©æ°”","ä¿æŒå¥½å¿ƒæƒ…",
"æ”¾æ¾ä¸€ä¸‹","åƒç‚¹å¥½åƒçš„","å‘å‰çœ‹","å‹‡æ•¢ä¸€ç‚¹","ä¿æŒç¬‘å®¹","åˆ«å¿˜äº†ä¼‘æ¯","ä»Šå¤©ä¹Ÿè¦åŠ æ²¹",
"æ—©ç‚¹ä¼‘æ¯","ç¥ä½ å¥½è¿","æ„¿ä½ ç¬‘å®¹å¸¸åœ¨","ä¸é¡ºæ‰¾æˆ‘","emoäº†ï¼Œç¡ä¸€è§‰","é¡ºåˆ©é¡ºåˆ©"
];

const colors = ["#FFF5E6","#FFEFE6","#FFF8E0","#FFE8B2","#FFD9A6","#FFB347"];
const num = 120;
const body = document.body;
let clickCount = 0;

// ç”Ÿæˆä¾¿ç­¾
for(let i=0;i<num;i++){
  const div = document.createElement("div");
  div.className="note";
  div.textContent = msgs[Math.floor(Math.random()*msgs.length)];
  div.style.background = colors[Math.floor(Math.random()*colors.length)];
  div.style.left = Math.random()*85+"%";
  div.style.top = Math.random()*85+"%";
  div.style.transform = `rotate(${(Math.random()*15-7.5).toFixed(1)}deg)`;
  div.style.zIndex = 10 + Math.floor(Math.random()*100);
  body.appendChild(div);

  div.onclick = ()=>{
    if(clickCount <5){
      showPopup(div.textContent);
      createLeaf(div); // ä»ä¾¿ç­¾ä½ç½®æ‰è½
    }
    clickCount++;
    if(clickCount>=5){
      clearAll();
      showPopup("ä½ ä¸€å®šå¯ä»¥çš„ â¤ï¸", true);
      for(let i=0;i<20;i++) createLeaf(); // å¤§é‡è½å¶
    }
  };
}

// å¼¹çª—æ˜¾ç¤º
function showPopup(text, final=false){
  if(final){
    document.querySelectorAll(".popup").forEach(p=>p.remove());
  }
  const p = document.createElement("div");
  p.className="popup"+(final?" final":"");
  p.textContent=text;
  // éšæœºé å·¦
  const leftPercent = Math.random()*30 + 10;
  p.style.left = leftPercent + "%";
  body.appendChild(p);
  requestAnimationFrame(()=>p.classList.add("show"));
  if(!final){
    setTimeout(()=>{
      p.classList.remove("show");
      setTimeout(()=>p.remove(),300);
    },1000);
  }
}

// æ¸…ç©ºä¾¿ç­¾
function clearAll(){
  document.querySelectorAll(".note").forEach(n=>n.remove());
}

// åˆ›å»ºç§‹å¶
function createLeaf(source=null){
  const leaf = document.createElement("div");
  leaf.className="leaf";
  // åˆå§‹ä½ç½®åœ¨ä¾¿ç­¾ä¸­å¿ƒæˆ–éšæœº
  let rect = source ? source.getBoundingClientRect() : {left:Math.random()*window.innerWidth, top:0};
  leaf.style.left = (rect.left + (source?rect.width/2:0)) + "px";
  leaf.style.top = (rect.top + (source?rect.height/2:0)) + "px";
  body.appendChild(leaf);

  const duration = 3000 + Math.random()*2000;
  const rotate = 360 + Math.random()*360;
  const xOffset = (Math.random()-0.5)*100; // æ¨ªå‘è½»å¾®æ¼‚ç§»

  let start = null;
  function animate(timestamp){
    if(!start) start=timestamp;
    const progress = (timestamp-start)/duration;
    if(progress<1){
      leaf.style.transform = `translate(${xOffset*progress}px, ${window.innerHeight*progress}px) rotate(${rotate*progress}deg)`;
      requestAnimationFrame(animate);
    }else{
      leaf.remove();
    }
  }
  requestAnimationFrame(animate);
}
</script>
</body>
</html>
